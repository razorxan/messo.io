<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script src="MessoClient.js"></script>
    <script>

        const messo = new MessoClient('ws://localhost:3030/?token=ciao&ciao=nno')

        messo.on('connection', async () => {
            console.log("connected");
            messo.send('ciccio', { help: "me" }, 'porco', 'cane');
            messo.on('prova', (a, b, respond) => {
                console.log('response from server', a, b);
                respond(true);
            });
            messo.request('request_test', 'cristo', 'santo').then(response => {
                console.log(response);
            })
            // const messo2 = new Messo('ws://localhost:3030/?token=ciao&ciao=nno')
            // messo2.on('connection', async () => {
            //     messo2.on('prova', (data, respond) => {
            //         respond('porco' + data)
            //     });
            // })



            messo.send('test_message', 'questo Ã¨ un semplice messaggio dal client');
            messo.send('test_message', {
                'to': 1
            });

            // const result = await messo.request('request_test', { 'ciao': 'sono una request del client' });
            // console.log(result);



            // const a = await messo.request('request_test', data => {
            //     console.log('data');
            //     console.log(data);
            // });
            // console.log(a);



        })










    </script>
</body>

</html>